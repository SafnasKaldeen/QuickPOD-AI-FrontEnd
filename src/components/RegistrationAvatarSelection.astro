---
import ProfileUpload from './ProfileUpload.jsx';
---

<div class="grid grid-cols-3 gap-4">
    <div class="col-span-3">
      <h1 class="text-3xl font-bold text-center text-gray-200">Select your Profile Image</h1>
        <ProfileUpload client:load />
    </div>
    <div class="col-span-3">
      <h1 class="text-3xl font-bold text-center text-gray-200">Select your AI Voice</h1>
      <img id="AI img" src="/images/Ai.gif" alt="AI" class="w-3/4 h-3/4 object-cover rounded-full mx-auto mt-4 cursor-pointer hidden" />
      <select
        id="voiceSelect"
        class="form-select w-full px-4 py-2 mt-4 border border-gray-300 rounded text-white bg-sky-900/30"
      >
        <option selected disabled value="0">Select Voice</option>
        <option value="alloy">Alloy: Female</option>
        <option value="echo">Echo: Male</option>
        <option value="fable">Fable: Male (British)</option>
        <option value="onyx">Onyx: Male</option>
        <option value="nova">Nova: Female</option>
        <option value="shimmer">Shimmer: Female</option>
      </select>
    </div>

    <!-- Audio Element for Playing Selected Voice -->
    <audio id="voiceAudio" src=""></audio>

    <!-- JavaScript to Play Audio Based on Selected Option -->
    <script>
      document
        .getElementById("voiceSelect")
        .addEventListener("change", function () {
          const selectedValue = this.value;
          const audioElement = document.getElementById("voiceAudio");
          const Gif = document.getElementById("AI img");
          let audioSrc = "";

          switch (selectedValue) {
            case "alloy":
              audioSrc = "/Audio/AI-Voices/alloy.wav";
              break;
            case "echo":
              audioSrc = "/Audio/AI-Voices/echo.wav";
              break;
            case "fable":
              audioSrc = "/Audio/AI-Voices/fable.wav";
              break;
            case "onyx":
              audioSrc = "/Audio/AI-Voices/onyx.wav";
              break;
            case "nova":
              audioSrc = "/Audio/AI-Voices/nova.wav";
              break;
            case "shimmer":
              audioSrc = "/Audio/AI-Voices/shimmer.wav";
              break;
            default:
              audioSrc = "";
          }

          if (audioSrc) {
            audioElement.src = audioSrc;
            Gif.classList.remove("hidden");
            audioElement.play();

            // Re-add the class once the audio is finished playing
            audioElement.addEventListener("ended", function () {
              Gif.classList.add("hidden");
            });
          }
        });
    </script>
  </div>