---
import SideMenuItem from "./SideMenuItem.astro";
import { sidebarPlaylists } from "../../lib/data";
import SideItemCard from "./SideItemCard.astro";
import Search from "./Search.jsx";

const query = "" || Astro.params.query;
---

<div class="flex flex-col flex-1 gap-2">
  <div class="bg-zinc-900 rounded-lg py-2">
    <ul>
      <SideMenuItem href="/Dashboard" iconName="carbon:home">Home</SideMenuItem>
      <Search client:load />
    </ul>
  </div>
  <div class="bg-zinc-900 rounded-lg flex-1">
    <ul>
      <SideMenuItem href="#" iconName="carbon:media-library">
        Your library
      </SideMenuItem>
      <ul class="pl-2">
        {
          sidebarPlaylists
            .filter((song) =>
              song.title
                .toLowerCase()
                .includes((query && query.toLowerCase()) || "")
            )
            .map((song) => <SideItemCard song={song} />)
        }
      </ul>
    </ul>
  </div>
</div>
